!function n(e,t,o){function r(a,l){if(!t[a]){if(!e[a]){var u="function"==typeof require&&require;if(!l&&u)return u(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(n){var t=e[a][1][n];return r(t?t:n)},c,c.exports,n,e,t,o)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(n){function e(){console.log("window resize"),u.width=window.innerWidth,u.height=window.innerHeight}function t(n,e,t,o){return n/=o/2,1>n?t/2*n*n*n+e:(n-=2,-t/2*(n*n*n*n-2)+e)}function o(n){return t(n,0,1,.3)-1}function r(){var n=(Date.now()-h)/1e3;if(h=Date.now(),f.moveCooldown>0)f.moveCooldown-=n,f.animProgress+=n;else{var e=0;p[m.w]&&f.getCell().up&&(e=f.animateMove(0,-1)),p[m.s]&&f.getCell().down&&(e=f.animateMove(0,1)),p[m.a]&&f.getCell().left&&(e=f.animateMove(-1,0)),p[m.d]&&f.getCell().right&&(e=f.animateMove(1,0)),e?(f.moveCooldown=.3,f.animProgress=0):f.animateMove(0,0)}i(),c=requestAnimationFrame(r)}function i(){s.clearRect(0,0,u.width,u.height),s.save();var n=f.pos.x+f.pos.xa*o(f.animProgress)+.5,e=f.pos.y+f.pos.ya*o(f.animProgress)+.5;s.translate(window.innerWidth/2-n*v,window.innerHeight/2-e*v),s.save(),s.beginPath(),s.arc(n*v,e*v,5,0,2*Math.PI,!1),s.fill(),s.stroke(),s.restore(),s.beginPath();for(var t=d.cells(),r=0;r<t.length;r++){var i=t[r],a=i.x*v,l=(i.x+1)*v,c=i.y*v,h=(i.y+1)*v;i.up||(s.moveTo(a,c),s.lineTo(l,c)),i.down||(s.moveTo(a,h),s.lineTo(l,h)),i.left||(s.moveTo(a,c),s.lineTo(a,h)),i.right||(s.moveTo(l,c),s.lineTo(l,h))}s.stroke(),s.restore()}function a(){game.player=f={},f.moveCooldown=1,f.animProgress=0,f.pos={x:0,y:0,xa:0,ya:0},f.getCell=function(){return d.getCellAt(f.pos.x,f.pos.y)},f.animateMove=function(n,e){return f.pos.xa=n,f.pos.x+=n,f.pos.ya=e,f.pos.y+=e,!0},window.addEventListener("keydown",function(n){p[n.which]=!0}),window.addEventListener("keyup",function(n){p[n.which]=!1})}function l(){u=document.getElementById("game-canvas"),window.addEventListener("resize",e,!1),a(),e(),s=u.getContext("2d"),d.clear(),d.makeChunk(0,0),d.makeChunk(-1,0),d.makeChunk(0,-1),d.makeChunk(-1,-1),g.run(),h=Date.now(),r()}var u,s,c,f,h,d=n("./grid"),g=n("./generator"),m=n("./keycode");window.game={},window.game.stop=function(){cancelAnimationFrame(c)},window.game.grid=d,window.game.generator=g;var v=30,p={};"interactive"===document.readyState?l():document.addEventListener("DOMContentLoaded",l)},{"./generator":2,"./grid":3,"./keycode":4}],2:[function(n,e,t){var o=n("./grid");t.hunt=function(){var n=_(o.cells()).filter(function(n){return 0===n.connections().length&&_.any(n.neighbors(),function(n){return n.connections().length>0})}),e=n.sample();if(!e||_.isArray(e)&&0===e.length)return void console.log("No cells found");var t=_.filter(e.neighbors(),function(n){return n.connections().length>0}),r=_.first(t);return!r||_.isArray(r)&&0===r.length||e.makeConnection(r),e},t.walk=function(n){var e=n.neighbors(),t=_.sample(_.filter(e,function(n){return 0===n.connections().length}));return void 0!==t&&n.makeConnection(t),t},t.run=function(n){for(void 0===n&&(n=o.pickRandCell());n;)n=t.step(n)},t.step=function(n){return n=t.walk(n),n||(n=t.hunt(n)),n}},{"./grid":3}],3:[function(n,e,t){var o,r=16;t.clear=function(){t.regions=o=[],o[0]=[],o[1]=[],o[2]=[],o[3]=[]},t.makeChunk=function(n,e){for(var i=[],a=0;r>a;a++){i[a]=[];for(var l=0;r>l;l++)i[a][l]=t.makeCell(16*n+l,16*e+a)}var u=0;0>n&&u++,0>e&&(u+=2);var s=0>n?Math.abs(n+1):n,c=0>e?Math.abs(e+1):e;o[u][c]||(o[u][c]=[]),o[u][c][s]=i},t.getCellAt=function(n,e){var t=0>n?r-Math.abs((n+1)%r)-1:n%r,i=0>e?r-Math.abs((e+1)%r)-1:e%r,a=Math.floor(n/r),l=Math.floor(e/r),u=0;0>n&&u++,0>e&&(u+=2);var s=0>a?Math.abs(a+1):a,c=0>l?Math.abs(l+1):l;if(!o[u][c]||!o[u][c][s])return null;var f=o[u][c][s][i][t];return f},t.cells=function(){var n,e,t,r,i,a=[];for(e=0;e<o.length;e++)for(t=0;t<o[e].length;t++)for(r=0;r<o[e][t].length;r++)for(n=o[e][t][r],i=0;i<n.length;i++)a=a.concat(n[i]);return a},t.makeCell=function(n,e){var o=[[n-1,e],[n+1,e],[n,e-1],[n,e+1]];return{x:n,y:e,up:!1,down:!1,right:!1,left:!1,neighbors:function(){return o.map(function(n){return t.getCellAt.apply(t,n)}).filter(function(n){return null!==n})},connections:function(){var o=[];return this.up&&o.push(t.getCellAt(n,e-1)),this.down&&o.push(t.getCellAt(n,e+1)),this.left&&o.push(t.getCellAt(n-1,e)),this.right&&o.push(t.getCellAt(n+1,e)),o.filter(function(n){return null!==n})},makeConnection:function(t){e-1===t.y?this.up=t.down=!0:e+1===t.y?this.down=t.up=!0:n-1===t.x?this.left=t.right=!0:n+1===t.x?this.right=t.left=!0:(console.warn("Attempted invalid connection"),console.log(this,t),console.trace())}}},t.pickRandCell=function(){return _.sample(t.cells())}},{}],4:[function(n,e){e.exports={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:24,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:70,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindow:91,rightwindow:92,select:93,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,nummultiply:106,numplus:107,numminus:109,numdot:110,numdivide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equals:187,comma:188,dash:189,dot:190,slash:191,grave:192,openparen:219,backslash:220,closeparen:221,singleqoute:222}},{}]},{},[1]);